<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
   <meta name="viewport" content="width=device-width, initial-scale=1" http-equiv="X-UA-Compatible" />
   <title>Employee Management App</title>
   <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
   <style type="text/css">

      body {
         background-color: #f9e0e3;
         color: #333;
         font-family: Arial, sans-serif;
      }

      h2 {
         color: #f06292;
      }
      #EmployeTable {
         border-collapse: collapse;
         width: 100%;
         border: 1px solid #f06292;
      }

      #EmployeTable th, #EmployeTable td {
         border: 1px solid #f06292;
         padding: 8px;
         text-align: left;
      }

      #EmployeTable th {
         background-color: #fce4ec;
      }

      #EmployeTable tr:nth-child(even) {
         background-color: #f8bbd0;
      }

      #EmployeTable tr:nth-child(odd) {
         background-color: #f48fb1;
      }

      .btn-pink {
         background-color: #f06292;
         color: #fff;
         padding: 10px 20px;
         border: none;
         border-radius: 5px;
         text-transform: uppercase;
         cursor: pointer;
      }

      .btn-pink:hover {
         background-color: #ec407a;
      }
   </style>
</h:head>
<h:body>
   <h2><h:outputText value="Employee List"/></h2>
   <h:form>
      <h:commandLink action="newEmploye.xhtml" value="Add Employee" styleClass="btn-pink" />
      <h:commandLink action="Affectation.xhtml" value="Affect Employee" styleClass="btn-pink" />
   </h:form>
   <br></br>
   <h:form id="EmployeForm">
      <table id="EmployeTable">
         <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Email</th>
            <th>Skills</th>
            <th>Projects</th>
            <th>Action</th>
         </tr>
         <ui:repeat value="#{employeBean.getEmployeListFromDb()}" var="Employe">
            <tr>
               <td>#{Employe.id}</td>
               <td>#{Employe.name}</td>
               <td>#{Employe.email}</td>
               <td>#{Employe.skills}</td>
               <td>
                  <ul>
                     <ui:repeat value="#{Employe.projects}" var="project">
                        <li>#{project.name}</li>
                     </ui:repeat>
                  </ul>
               </td>
               <td>
                  <h:commandButton action="#{employeBean.deleteEmploye(Employe.id)}" value="Remove"  />
               </td>
            </tr>
         </ui:repeat>
      </table>
   </h:form>
</h:body>
</html>
